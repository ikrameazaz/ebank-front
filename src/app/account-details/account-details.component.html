<!-- 💳 Account Details - Design Moderne -->
<div class="account-details-container">
  <div class="container">
    <!-- 📋 Header avec informations du compte -->
    <div class="account-header">
      <div class="header-content">
        <div class="account-info">
          <div class="account-icon">
            <i class="bi bi-credit-card-fill"></i>
          </div>
          <div class="account-text">
            <h1 class="account-title">Account Details</h1>
            <p class="account-subtitle" *ngIf="account">
              {{account.type === 'CURRENT_ACCOUNT' ? 'Current Account' : 'Savings Account'}} • 
              ID: {{account.id}}
            </p>
          </div>
        </div>
        <div class="header-actions">
          <button class="btn btn-outline" (click)="goBack()">
            <i class="bi bi-arrow-left"></i>
            Back
          </button>
          <button class="btn btn-primary" (click)="openTransactionModal()">
            <i class="bi bi-plus-circle"></i>
            New Transaction
          </button>
        </div>
      </div>
    </div>

    <!-- 📊 Informations du compte -->
    <div class="account-overview" *ngIf="account">
      <div class="overview-grid">
        <!-- 💰 Solde principal -->
        <div class="balance-card">
          <div class="balance-header">
            <h3>Current Balance</h3>
            <div class="balance-trend" [ngClass]="getBalanceTrend()">
              <i class="bi" [ngClass]="getBalanceIcon()"></i>
            </div>
          </div>
          <div class="balance-amount" [ngClass]="getBalanceClass()">
            {{account.balance | currency:'USD':'symbol':'1.2-2'}}
          </div>
          <div class="balance-info">
            <span class="balance-label">Available Balance</span>
          </div>
        </div>

        <!-- 📈 Statistiques -->
        <div class="stats-card">
          <h3>Account Statistics</h3>
          <div class="stats-grid">
            <div class="stat-item">
              <div class="stat-value">{{totalTransactions}}</div>
              <div class="stat-label">Total Transactions</div>
            </div>
            <div class="stat-item">
              <div class="stat-value">{{totalCredits}}</div>
              <div class="stat-label">Credits</div>
            </div>
            <div class="stat-item">
              <div class="stat-value">{{totalDebits}}</div>
              <div class="stat-label">Debits</div>
            </div>
          </div>
        </div>

        <!-- ℹ️ Informations du compte -->
        <div class="info-card">
          <h3>Account Information</h3>
          <div class="info-list">
            <div class="info-item">
              <span class="info-label">Account Type:</span>
              <span class="info-value">
                <span class="account-type-badge" [ngClass]="account.type?.toLowerCase()">
                  {{account.type === 'CURRENT_ACCOUNT' ? 'Current Account' : 'Savings Account'}}
                </span>
              </span>
            </div>
            <div class="info-item">
              <span class="info-label">Created Date:</span>
              <span class="info-value">{{account.createdAt | date:'fullDate'}}</span>
            </div>
            <div class="info-item">
              <span class="info-label">Customer:</span>
              <span class="info-value">{{account.customerDTO?.name || 'N/A'}}</span>
            </div>
            <div class="info-item">
              <span class="info-label">Status:</span>
              <span class="status-badge active">Active</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 📋 Historique des transactions -->
    <div class="transactions-section">
      <div class="section-header">
        <h2>Transaction History</h2>
        <div class="section-actions">
          <div class="pagination-info" *ngIf="accountHistory">
            Page {{currentPage + 1}} of {{accountHistory.totalPages}}
          </div>
          <div class="pagination-controls">
            <button class="btn btn-outline btn-sm" 
                    (click)="previousPage()" 
                    [disabled]="currentPage === 0">
              <i class="bi bi-chevron-left"></i>
            </button>
            <button class="btn btn-outline btn-sm" 
                    (click)="nextPage()" 
                    [disabled]="currentPage >= (accountHistory?.totalPages || 1) - 1">
              <i class="bi bi-chevron-right"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- 📊 Tableau des transactions -->
      <div class="transactions-table" *ngIf="accountHistory?.accountOperationDTOS?.length; else noTransactions">
        <div class="table-header">
          <div class="header-cell">Date</div>
          <div class="header-cell">Type</div>
          <div class="header-cell">Description</div>
          <div class="header-cell">Amount</div>
          <div class="header-cell">Balance</div>
        </div>
        
        <div class="table-body">
          <div class="table-row" *ngFor="let operation of accountHistory.accountOperationDTOS">
            <div class="table-cell">
              <div class="date-info">
                <div class="date-primary">{{operation.operationDate | date:'MMM dd, yyyy'}}</div>
                <div class="date-secondary">{{operation.operationDate | date:'HH:mm'}}</div>
              </div>
            </div>
            <div class="table-cell">
              <span class="operation-type" [ngClass]="operation.type?.toLowerCase()">
                <i class="bi" [ngClass]="getOperationIcon(operation.type)"></i>
                {{operation.type}}
              </span>
            </div>
            <div class="table-cell">
              <span class="operation-description">{{operation.description || 'No description'}}</span>
            </div>
            <div class="table-cell">
              <span class="amount" [ngClass]="getAmountClass(operation.type)">
                {{getAmountPrefix(operation.type)}}{{operation.amount | currency:'USD':'symbol':'1.2-2'}}
              </span>
            </div>
            <div class="table-cell">
              <span class="balance">{{operation.balance | currency:'USD':'symbol':'1.2-2'}}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- 🚫 État vide -->
      <ng-template #noTransactions>
        <div class="empty-state">
          <div class="empty-icon">
            <i class="bi bi-receipt"></i>
          </div>
          <h3>No Transactions Found</h3>
          <p>This account doesn't have any transactions yet.</p>
          <button class="btn btn-primary" (click)="openTransactionModal()">
            <i class="bi bi-plus-circle"></i>
            Create First Transaction
          </button>
        </div>
      </ng-template>
    </div>
  </div>
</div>

<!-- 🔄 Loading State -->
<div class="loading-overlay" *ngIf="isLoading">
  <div class="loading-spinner">
    <i class="bi bi-arrow-clockwise spin"></i>
    <p>Loading account details...</p>
  </div>
</div>

<!-- ❌ Error State -->
<div class="error-overlay" *ngIf="errorMessage">
  <div class="error-modal">
    <div class="error-icon">
      <i class="bi bi-exclamation-triangle-fill"></i>
    </div>
    <h3>Error Loading Account</h3>
    <p>{{errorMessage}}</p>
    <div class="error-actions">
      <button class="btn btn-outline" (click)="goBack()">Go Back</button>
      <button class="btn btn-primary" (click)="loadAccountDetails()">Retry</button>
    </div>
  </div>
</div>
